<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מחשבון מחירים - טוויסט מדיה</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700&family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --color-primary: #D4812A;
            --color-primary-light: #F0C18C;
            --color-primary-dark: #B06A1E;
            --color-accent: #C9A96E;
            --color-accent-light: #E2D5B5;
            --color-bg: #F0F0F0;
            --color-surface: #FFFFFF;
            --color-text: #3A3238;
            --color-text-muted: #7A7280;
            --color-border: #E8E4E0;
            --color-success: #7BAE8B;
            --color-discount: #AE7B7B;
            --font-body: 'Heebo', sans-serif;
            --font-heading: 'Rubik', sans-serif;
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --shadow-sm: 0 1px 3px rgba(58, 50, 56, 0.08);
            --shadow-md: 0 4px 12px rgba(58, 50, 56, 0.1);
            --shadow-lg: 0 8px 24px rgba(58, 50, 56, 0.12);
        }

        body {
            font-family: var(--font-body);
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 2.5rem 1rem 1.5rem;
        }

        .header h1 {
            font-family: var(--font-heading);
            font-size: clamp(1.6rem, 4vw, 2.2rem);
            font-weight: 700;
            color: var(--color-primary-dark);
            margin-bottom: 0.3rem;
        }

        .header p {
            color: var(--color-text-muted);
            font-size: 0.95rem;
        }

        /* Layout */
        .app-layout {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 1rem 2rem;
        }

        @media (min-width: 768px) {
            .app-layout {
                display: grid;
                grid-template-columns: 1fr 340px;
                gap: 1.5rem;
                align-items: start;
            }
        }

        /* Cards */
        .card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: 1.25rem 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-sm);
        }

        .card h2 {
            font-family: var(--font-heading);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-primary-dark);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--color-primary-light);
        }

        /* Base Package */
        .base-package-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background: linear-gradient(135deg, #fdf5ec, #f0f0f0);
            border-radius: var(--radius-md);
            border: 1px solid var(--color-primary-light);
        }

        .base-package-item .item-label {
            font-weight: 500;
        }

        .base-package-item .item-includes {
            font-size: 0.85rem;
            color: var(--color-text-muted);
            margin-top: 0.25rem;
        }

        .base-package-item .item-price {
            font-family: var(--font-heading);
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            white-space: nowrap;
        }

        /* Toggle rows */
        .toggle-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 0;
            cursor: pointer;
            border-bottom: 1px solid #f0ece8;
            transition: background 0.15s;
        }

        .toggle-row:last-child {
            border-bottom: none;
        }

        .toggle-row:hover {
            background: #f5f5f5;
            margin-inline: -0.5rem;
            padding-inline: 0.5rem;
            border-radius: var(--radius-sm);
        }

        .toggle-input {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 46px;
            min-width: 46px;
            height: 26px;
            background: #d4d0cc;
            border-radius: 13px;
            transition: background 0.3s ease;
            cursor: pointer;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: white;
            top: 2px;
            right: 2px;
            transition: transform 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.15);
        }

        .toggle-input:checked + .toggle-switch {
            background: var(--color-primary);
        }

        .toggle-input:checked + .toggle-switch::after {
            transform: translateX(-20px);
        }

        .toggle-input:focus-visible + .toggle-switch {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
        }

        .toggle-content {
            flex: 1;
            min-width: 0;
        }

        .toggle-label {
            font-weight: 400;
            font-size: 0.95rem;
            display: block;
        }

        .toggle-details {
            font-size: 0.82rem;
            color: var(--color-text-muted);
            margin-top: 0.15rem;
        }

        .toggle-price {
            font-family: var(--font-heading);
            font-weight: 500;
            font-size: 0.95rem;
            color: var(--color-accent);
            white-space: nowrap;
            min-width: 80px;
            text-align: left;
        }

        .toggle-note {
            font-size: 0.8rem;
            color: var(--color-text-muted);
            padding: 0.25rem 0 0.5rem;
            padding-inline-start: calc(46px + 0.75rem);
        }

        /* Quantity selector */
        .qty-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid #f0ece8;
        }

        .qty-row-content {
            flex: 1;
            min-width: 0;
        }

        .qty-controls {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            background: var(--color-bg);
            border-radius: var(--radius-md);
            padding: 2px;
        }

        .qty-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 50%;
            background: var(--color-surface);
            color: var(--color-primary);
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            box-shadow: var(--shadow-sm);
        }

        .qty-btn:hover:not(:disabled) {
            background: var(--color-primary);
            color: white;
        }

        .qty-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .qty-value {
            min-width: 2rem;
            text-align: center;
            font-weight: 600;
            font-size: 1rem;
            font-family: var(--font-heading);
        }

        /* Radio group */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s;
        }

        .radio-option:hover {
            border-color: var(--color-primary-light);
            background: #f5f5f5;
        }

        .radio-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .radio-custom {
            width: 20px;
            height: 20px;
            min-width: 20px;
            border: 2px solid #d4d0cc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .radio-custom::after {
            content: '';
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--color-primary);
            transform: scale(0);
            transition: transform 0.2s;
        }

        .radio-option input[type="radio"]:checked ~ .radio-custom {
            border-color: var(--color-primary);
        }

        .radio-option input[type="radio"]:checked ~ .radio-custom::after {
            transform: scale(1);
        }

        .radio-option input[type="radio"]:focus-visible ~ .radio-custom {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
        }

        .radio-option input[type="radio"]:checked ~ .radio-text {
            font-weight: 500;
            color: var(--color-primary-dark);
        }

        .radio-text {
            font-size: 0.93rem;
        }

        .radio-discount {
            font-weight: 600;
            color: var(--color-discount);
        }

        /* Price Summary */
        .price-summary {
            background: var(--color-surface);
            border: 2px solid var(--color-primary-light);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
        }

        @media (min-width: 768px) {
            .price-summary {
                position: sticky;
                top: 1rem;
            }
        }

        .price-summary h2 {
            font-family: var(--font-heading);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-primary-dark);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--color-primary-light);
        }

        .summary-lines {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            margin-bottom: 1rem;
        }

        .summary-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            gap: 0.5rem;
        }

        .summary-line-label {
            color: var(--color-text-muted);
        }

        .summary-line-detail {
            font-size: 0.78rem;
            color: var(--color-text-muted);
            padding-inline-start: 0.25rem;
            margin-top: -0.2rem;
            margin-bottom: 0.3rem;
        }

        .summary-line-amount {
            font-family: var(--font-heading);
            font-weight: 500;
            white-space: nowrap;
        }

        .summary-divider {
            border-top: 1px dashed var(--color-border);
            margin: 0.75rem 0;
        }

        .summary-discount {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: var(--color-discount);
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .summary-subtotal {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 0.3rem;
        }

        .summary-vat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: var(--color-text-muted);
            margin-bottom: 0.3rem;
        }

        .summary-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: linear-gradient(135deg, #fdf5ec, #faebd7);
            border-radius: var(--radius-md);
            margin-top: 0.75rem;
        }

        .summary-total-label {
            font-family: var(--font-heading);
            font-weight: 600;
            font-size: 1rem;
            color: var(--color-primary-dark);
        }

        .summary-total-value {
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--color-primary-dark);
            transition: transform 0.3s ease;
        }

        .summary-total-value.pulse {
            animation: pricePulse 0.4s ease;
        }

        @keyframes pricePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.08); color: var(--color-accent); }
            100% { transform: scale(1); }
        }

        .vat-note {
            text-align: center;
            font-size: 0.8rem;
            color: var(--color-text-muted);
            margin-top: 0.75rem;
        }

        .btn-copy {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
            padding: 0.75rem;
            margin-top: 1rem;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-copy:hover {
            background: var(--color-primary-dark);
        }

        .btn-copy.copied {
            background: var(--color-success);
        }

        .btn-copy svg {
            width: 18px;
            height: 18px;
        }

        /* Policies */
        .policies-section {
            max-width: 1100px;
            margin: 1rem auto 2rem;
            padding: 0 1rem;
        }

        .policies-section h2 {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--color-primary-dark);
            text-align: center;
            margin-bottom: 1rem;
        }

        .policy-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            margin-bottom: 0.75rem;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }

        .policy-card summary {
            padding: 1rem 1.5rem;
            font-family: var(--font-heading);
            font-weight: 500;
            font-size: 1rem;
            color: var(--color-primary-dark);
            cursor: pointer;
            list-style: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.15s;
        }

        .policy-card summary:hover {
            background: #f5f5f5;
        }

        .policy-card summary::after {
            content: '';
            width: 8px;
            height: 8px;
            border-left: 2px solid var(--color-primary);
            border-bottom: 2px solid var(--color-primary);
            transform: rotate(-45deg);
            transition: transform 0.3s;
        }

        .policy-card[open] summary::after {
            transform: rotate(135deg);
        }

        .policy-card summary::-webkit-details-marker {
            display: none;
        }

        .policy-content {
            padding: 0 1.5rem 1.25rem;
        }

        .policy-content ul {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .policy-content li {
            position: relative;
            padding-inline-start: 1.25rem;
            font-size: 0.9rem;
            line-height: 1.7;
            color: var(--color-text);
        }

        .policy-content li::before {
            content: '';
            position: absolute;
            inset-inline-start: 0;
            top: 0.6em;
            width: 6px;
            height: 6px;
            background: var(--color-primary-light);
            border-radius: 50%;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 1.5rem 1rem;
            color: var(--color-text-muted);
            font-size: 0.82rem;
        }

        /* Mobile summary bar */
        @media (max-width: 767px) {
            .summary-column {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                z-index: 100;
                padding: 0;
            }

            .price-summary {
                border-radius: var(--radius-lg) var(--radius-lg) 0 0;
                box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
                border: none;
                border-top: 2px solid var(--color-primary-light);
                max-height: 70vh;
                overflow-y: auto;
                transition: max-height 0.3s ease;
                padding: 1rem 1.5rem;
            }

            .price-summary.collapsed {
                padding: 0.65rem 1rem;
                max-height: none;
                position: relative;
            }

            .price-summary.collapsed .summary-lines,
            .price-summary.collapsed .summary-divider,
            .price-summary.collapsed .summary-discount,
            .price-summary.collapsed .summary-subtotal,
            .price-summary.collapsed .summary-vat,
            .price-summary.collapsed .vat-note,
            .price-summary.collapsed .btn-copy,
            .price-summary.collapsed h2 {
                display: none;
            }

            .price-summary.collapsed .summary-total {
                margin-top: 0;
                padding: 0;
                padding-right: 2.5rem;
                background: none;
                border-radius: 0;
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 1rem;
            }

            .price-summary.collapsed .summary-total-label {
                font-size: 0.95rem;
                font-weight: 500;
            }

            .price-summary.collapsed .summary-total-value {
                font-size: 1.15rem;
            }

            .summary-expand-btn {
                display: flex;
                align-items: center;
                justify-content: center;
                background: none;
                border: none;
                padding: 0.5rem;
                cursor: pointer;
                color: var(--color-text-muted);
                margin-bottom: 0.5rem;
            }

            .price-summary.collapsed .summary-expand-btn {
                position: absolute;
                left: 0.5rem;
                top: 50%;
                transform: translateY(-50%);
                margin: 0;
                padding: 0.4rem;
                width: auto;
            }

            .summary-expand-btn svg {
                width: 20px;
                height: 20px;
                transition: transform 0.3s;
            }

            .price-summary.collapsed .summary-expand-btn svg {
                transform: rotate(180deg);
            }

            .calculator-column {
                padding-bottom: 70px;
            }

            .policies-section {
                margin-bottom: 80px;
                margin-top: 0;
            }
        }

        @media (min-width: 768px) {
            .summary-expand-btn {
                display: none;
            }
        }

        /* Print styles */
        @media print {
            .btn-copy, .summary-expand-btn, .toggle-switch {
                display: none !important;
            }
            .price-summary {
                position: static !important;
                box-shadow: none !important;
            }
            .policy-card[open] {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>

<header class="header">
    <h1>טוויסט מדיה</h1>
    <p>מחשבון מחירים — חבילות עריכת וידאו לחתונות 2026</p>
</header>

<div class="app-layout">
    <!-- Calculator Column -->
    <div class="calculator-column">

        <!-- Base Package -->
        <div class="card">
            <h2>חבילה בסיסית</h2>
            <div class="base-package-item">
                <div>
                    <div class="item-label">סרט חתונה צלם אחד</div>
                    <div class="item-includes">כולל: קליפ קבלת פנים, ניתוב חופה, ריקודים רציף, קליפ היילייטס</div>
                </div>
                <div class="item-price">900 ש"ח</div>
            </div>
        </div>

        <!-- Additions -->
        <div class="card">
            <h2>תוספות</h2>

            <!-- Dances surcharge -->
            <label class="toggle-row">
                <input type="checkbox" class="toggle-input" data-id="dances" data-price="500">
                <span class="toggle-switch"></span>
                <div class="toggle-content">
                    <span class="toggle-label">ריקודים באינטרקאטים (לא רציף)</span>
                    <span class="toggle-details">ריקודים שצולמו באינטרקאטים ולא באופן רציף לאורך כל האירוע</span>
                </div>
                <span class="toggle-price">500 ש"ח</span>
            </label>

            <!-- Log/flat profile -->
            <label class="toggle-row">
                <input type="checkbox" class="toggle-input" data-id="log-profile" data-price="200">
                <span class="toggle-switch"></span>
                <div class="toggle-content">
                    <span class="toggle-label">צילום בlog או פרופיל שטוח</span>
                </div>
                <span class="toggle-price">200 ש"ח</span>
            </label>

            <!-- Extra clips with quantity (no toggle, starts from 0) -->
            <div class="qty-row">
                <div class="qty-row-content">
                    <span class="toggle-label">קליפים נוספים</span>
                    <span class="toggle-details">טריילר, רילס, קליפ סיום, קליפ התארגנות וחוץ, קליפ חופה, וכדומה</span>
                    <div style="margin-top:0.5rem;display:flex;align-items:center;gap:0.75rem;">
                        <div class="qty-controls">
                            <button type="button" class="qty-btn" id="qty-minus" aria-label="הפחת כמות" disabled>-</button>
                            <span class="qty-value" id="qty-value">0</span>
                            <button type="button" class="qty-btn" id="qty-plus" aria-label="הוסף כמות">+</button>
                        </div>
                        <span class="toggle-price" id="clips-price">200 ש"ח לקליפ</span>
                    </div>
                </div>
            </div>

            <!-- Extra camera -->
            <label class="toggle-row">
                <input type="checkbox" class="toggle-input" data-id="extra-camera" data-price="400">
                <span class="toggle-switch"></span>
                <div class="toggle-content">
                    <span class="toggle-label">צלם נוסף</span>
                    <span class="toggle-details">כולל סרט מקוצר וקליפ חופה</span>
                </div>
                <span class="toggle-price">400 ש"ח</span>
            </label>

            <!-- Management service -->
            <label class="toggle-row">
                <input type="checkbox" class="toggle-input" data-id="management" data-price="150">
                <span class="toggle-switch"></span>
                <div class="toggle-content">
                    <span class="toggle-label">שירות ניהול מקיף</span>
                    <span class="toggle-details">בקשת שירים מהזוג, מענה לזוגות, ניהול שינויים ותיקונים מול הזוג, טיפול בחוסרים והערות שיפור מול צלמים וכדומה</span>
                </div>
                <span class="toggle-price">150 ש"ח</span>
            </label>
        </div>

        <!-- Volume Discount -->
        <div class="card">
            <h2>הנחת כמות</h2>
            <div class="radio-group">
                <label class="radio-option">
                    <input type="radio" name="volume" value="0" checked>
                    <span class="radio-custom"></span>
                    <span class="radio-text">ללא הנחה</span>
                </label>
                <label class="radio-option">
                    <input type="radio" name="volume" value="100">
                    <span class="radio-custom"></span>
                    <span class="radio-text">מעל 10 סרטים בחודש או 120 בשנה — <span class="radio-discount">הנחה 100 ש"ח</span></span>
                </label>
                <label class="radio-option">
                    <input type="radio" name="volume" value="200">
                    <span class="radio-custom"></span>
                    <span class="radio-text">מעל 20 סרטים בחודש או 240 בשנה — <span class="radio-discount">הנחה 200 ש"ח</span></span>
                </label>
            </div>
        </div>

        <!-- VAT Toggle -->
        <div class="card">
            <label class="toggle-row" style="border-bottom:none;">
                <input type="checkbox" class="toggle-input" id="vat-toggle">
                <span class="toggle-switch"></span>
                <div class="toggle-content">
                    <span class="toggle-label">הצג מחירים כולל מע"מ (18%)</span>
                </div>
            </label>
        </div>

    </div>

    <!-- Summary Column -->
    <div class="summary-column">
        <div class="price-summary collapsed" id="price-summary">
            <button type="button" class="summary-expand-btn" id="summary-expand" aria-label="הרחב סיכום">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>
            </button>
            <h2>סיכום מחיר</h2>
            <div class="summary-lines" id="summary-lines"></div>
            <div class="summary-divider" id="summary-divider"></div>
            <div class="summary-discount" id="summary-discount" style="display:none;"></div>
            <div class="summary-subtotal" id="summary-subtotal"></div>
            <div class="summary-vat" id="summary-vat" style="display:none;"></div>
            <div class="summary-total">
                <span class="summary-total-label">סה"כ</span>
                <span class="summary-total-value" id="summary-total-value">900 ש"ח</span>
            </div>
            <p class="vat-note">* המחירים לא כוללים מע"מ</p>
            <button type="button" class="btn-copy" id="btn-copy">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                <span id="btn-copy-text">העתק סיכום</span>
            </button>
        </div>
    </div>
</div>

<!-- Policies -->
<section class="policies-section">
    <h2>תנאים ומדיניות</h2>

    <details class="policy-card" open>
        <summary>שינויים ותיקונים</summary>
        <div class="policy-content">
            <ul>
                <li>כל שינוי שאינו טכני עלותו תתומחר לפי שיקול דעתו של העורך</li>
                <li>שינוי והחלפת שירים תהיה בעלות 350 ש"ח לקליפ היילייטס, 150 ש"ח לרילס, קבלת פנים וכדומה</li>
                <li>סבב שינויים אחד בלבד לפרויקט, כל סבב שינויים נוסף יתומחר בנפרד</li>
                <li>ניתן להגיש שינויים עד 30 ימים מקבלת הסרט המוכן</li>
                <li>השינויים יבוצעו עד 14 ימי עסקים מיום קבלת טופס התיקונים מהלקוח</li>
            </ul>
        </div>
    </details>

    <details class="policy-card">
        <summary>גיבויים</summary>
        <div class="policy-content">
            <ul>
                <li>חומרי גלם יגובו 30 ימים מיום שליחת הסרט המוכן</li>
                <li>אקספורטים של סרטים מוכנים יגובו 90 ימים מיום שליחת הסרט המוכן</li>
                <li>ניתן לקבל שירות של ניהול גיבויים בתשלום של 30 ש"ח לטרה בחודש</li>
            </ul>
        </div>
    </details>

    <details class="policy-card">
        <summary>הערות כלליות</summary>
        <div class="policy-content">
            <ul>
                <li>המחירים לא כוללים מע"מ</li>
            </ul>
        </div>
    </details>
</section>

<footer class="footer">
    &copy; 2026 טוויסט מדיה — כל הזכויות שמורות
</footer>

<script>
(function() {
    'use strict';

    // ===== CONFIG =====
    var CONFIG = {
        BASE_PRICE: 900,
        VAT_RATE: 0.18,
        ITEMS: {
            'dances':        { price: 500, label: 'ריקודים באינטרקאטים (לא רציף)', detail: 'ריקודים שצולמו באינטרקאטים ולא באופן רציף לאורך כל האירוע' },
            'log-profile':   { price: 200, label: 'צילום בlog או פרופיל שטוח' },
            'extra-camera':  { price: 400, label: 'צלם נוסף', detail: 'כולל סרט מקוצר וקליפ חופה' },
            'management':    { price: 150, label: 'שירות ניהול מקיף', detail: 'בקשת שירים מהזוג, מענה לזוגות, ניהול שינויים ותיקונים מול הזוג, טיפול בחוסרים והערות שיפור מול צלמים וכדומה' }
        }
    };

    // ===== STATE =====
    var state = {
        selectedItems: {},
        clipQuantity: 0,
        volumeDiscount: 0,
        includeVat: false
    };

    // ===== DOM REFS =====
    var summaryLines = document.getElementById('summary-lines');
    var summaryDivider = document.getElementById('summary-divider');
    var summaryDiscount = document.getElementById('summary-discount');
    var summarySubtotal = document.getElementById('summary-subtotal');
    var summaryVat = document.getElementById('summary-vat');
    var summaryTotalValue = document.getElementById('summary-total-value');
    var btnCopy = document.getElementById('btn-copy');
    var btnCopyText = document.getElementById('btn-copy-text');
    var qtyValue = document.getElementById('qty-value');
    var qtyMinus = document.getElementById('qty-minus');
    var qtyPlus = document.getElementById('qty-plus');
    var clipsPrice = document.getElementById('clips-price');
    var vatToggle = document.getElementById('vat-toggle');
    var summaryExpand = document.getElementById('summary-expand');
    var priceSummary = document.getElementById('price-summary');

    // ===== FORMAT =====
    function formatPrice(amount) {
        return amount.toLocaleString('he-IL') + ' ש"ח';
    }

    // ===== CALCULATE =====
    function calculate() {
        var lines = [];
        var subtotal = CONFIG.BASE_PRICE;
        lines.push({ label: 'סרט חתונה צלם אחד', amount: CONFIG.BASE_PRICE });

        var keys = Object.keys(CONFIG.ITEMS);
        for (var i = 0; i < keys.length; i++) {
            var id = keys[i];
            var item = CONFIG.ITEMS[id];
            if (state.selectedItems[id]) {
                var amount = item.price;
                lines.push({ label: item.label, amount: amount, detail: item.detail || null });
                subtotal += amount;
            }
        }

        // Extra clips (quantity-based, no toggle)
        if (state.clipQuantity > 0) {
            var clipsAmount = 200 * state.clipQuantity;
            lines.push({
                label: 'קליפים נוספים (' + state.clipQuantity + ')',
                amount: clipsAmount
            });
            subtotal += clipsAmount;
        }

        var discountAmount = state.volumeDiscount;
        var discountLabel = '';
        if (discountAmount === 100) {
            discountLabel = 'מעל 10 סרטים בחודש או 120 בשנה';
        } else if (discountAmount === 200) {
            discountLabel = 'מעל 20 סרטים בחודש או 240 בשנה';
        }
        var afterDiscount = subtotal - discountAmount;
        var vatAmount = state.includeVat ? Math.round(afterDiscount * CONFIG.VAT_RATE) : 0;
        var total = afterDiscount + vatAmount;

        return {
            lines: lines,
            subtotal: subtotal,
            discountAmount: discountAmount,
            discountLabel: discountLabel,
            afterDiscount: afterDiscount,
            vatAmount: vatAmount,
            total: total
        };
    }

    // ===== RENDER =====
    function render() {
        var calc = calculate();

        // Summary lines
        var html = '';
        for (var i = 0; i < calc.lines.length; i++) {
            var line = calc.lines[i];
            html += '<div class="summary-line">' +
                '<span class="summary-line-label">' + line.label + '</span>' +
                '<span class="summary-line-amount">' + formatPrice(line.amount) + '</span>' +
                '</div>';
            // Add detail line after base package
            if (i === 0) {
                html += '<div class="summary-line-detail">כולל: קליפ קבלת פנים, ניתוב חופה, ריקודים רציף, קליפ היילייטס</div>';
            }
            // Add detail for items that have one
            if (line.detail) {
                html += '<div class="summary-line-detail">' + line.detail + '</div>';
            }
        }
        summaryLines.innerHTML = html;

        // Discount
        if (calc.discountAmount > 0) {
            summaryDiscount.style.display = 'flex';
            summaryDiscount.innerHTML =
                '<span>הנחת כמות (' + calc.discountLabel + ')</span>' +
                '<span>-' + formatPrice(calc.discountAmount) + '</span>';
        } else {
            summaryDiscount.style.display = 'none';
        }

        // Subtotal
        if (calc.discountAmount > 0 || state.includeVat) {
            summarySubtotal.style.display = 'flex';
            summarySubtotal.innerHTML =
                '<span>סה"כ לפני מע"מ</span>' +
                '<span>' + formatPrice(calc.afterDiscount) + '</span>';
        } else {
            summarySubtotal.style.display = 'none';
        }

        // VAT
        if (state.includeVat) {
            summaryVat.style.display = 'flex';
            summaryVat.innerHTML =
                '<span>מע"מ (18%)</span>' +
                '<span>' + formatPrice(calc.vatAmount) + '</span>';
        } else {
            summaryVat.style.display = 'none';
        }

        // Total
        var totalLabel = state.includeVat ? 'סה"כ כולל מע"מ' : 'סה"כ';
        document.querySelector('.summary-total-label').textContent = totalLabel;
        summaryTotalValue.textContent = formatPrice(calc.total);

        // Pulse animation
        summaryTotalValue.classList.remove('pulse');
        void summaryTotalValue.offsetWidth; // trigger reflow
        summaryTotalValue.classList.add('pulse');

        // VAT note
        var vatNote = document.querySelector('.vat-note');
        if (state.includeVat) {
            vatNote.textContent = '* המחירים מוצגים כולל מע"מ (18%)';
        } else {
            vatNote.textContent = '* המחירים לא כוללים מע"מ';
        }

        // Clips price label
        if (state.clipQuantity > 0) {
            clipsPrice.textContent = formatPrice(200 * state.clipQuantity);
        } else {
            clipsPrice.textContent = '200 ש"ח לקליפ';
        }
        qtyValue.textContent = state.clipQuantity;
        qtyMinus.disabled = state.clipQuantity <= 0;
        qtyPlus.disabled = state.clipQuantity >= 20;
    }

    // ===== EVENTS =====

    // Toggles
    var toggles = document.querySelectorAll('.toggle-input[data-id]');
    for (var i = 0; i < toggles.length; i++) {
        toggles[i].addEventListener('change', function() {
            var id = this.getAttribute('data-id');
            state.selectedItems[id] = this.checked;
            render();
        });
    }

    // VAT toggle
    vatToggle.addEventListener('change', function() {
        state.includeVat = this.checked;
        render();
    });

    // Quantity buttons
    qtyMinus.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (state.clipQuantity > 0) {
            state.clipQuantity--;
            render();
        }
    });

    qtyPlus.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (state.clipQuantity < 20) {
            state.clipQuantity++;
            render();
        }
    });

    // Volume discount radios
    var radios = document.querySelectorAll('input[name="volume"]');
    for (var i = 0; i < radios.length; i++) {
        radios[i].addEventListener('change', function() {
            state.volumeDiscount = parseInt(this.value, 10);
            render();
        });
    }

    // Mobile expand/collapse
    summaryExpand.addEventListener('click', function() {
        priceSummary.classList.toggle('collapsed');
    });

    // Copy summary
    btnCopy.addEventListener('click', function() {
        var calc = calculate();
        var text = '*טוויסט מדיה*\n';
        text += 'הצעת מחיר — עריכת וידאו לחתונה\n\n';

        for (var i = 0; i < calc.lines.length; i++) {
            text += '▸ ' + calc.lines[i].label + ' — ' + formatPrice(calc.lines[i].amount) + '\n';
            if (i === 0) {
                text += '   כולל: קליפ קבלת פנים, ניתוב חופה, ריקודים רציף, קליפ היילייטס\n';
            }
            if (calc.lines[i].detail) {
                text += '   ' + calc.lines[i].detail + '\n';
            }
        }

        if (calc.discountAmount > 0) {
            text += '\n▸ הנחת כמות (' + calc.discountLabel + '): -' + formatPrice(calc.discountAmount) + '\n';
        }

        text += '\n';
        if (state.includeVat) {
            text += '*מחיר: ' + formatPrice(calc.afterDiscount) + '*\n';
            text += 'מע"מ (18%): ' + formatPrice(calc.vatAmount) + '\n';
            text += '*סה"כ כולל מע"מ: ' + formatPrice(calc.total) + '*\n';
        } else {
            text += '*סה"כ: ' + formatPrice(calc.total) + '*\n';
        }

        text += '\n_שינויים ותיקונים:_\n';
        text += '· כל שינוי שאינו טכני עלותו תתומחר לפי שיקול דעתו של העורך\n';
        text += '· שינוי והחלפת שירים: 350 ש"ח לקליפ היילייטס, 150 ש"ח לרילס/קבלת פנים וכדומה\n';
        text += '· סבב שינויים אחד בלבד לפרויקט, כל סבב שינויים נוסף יתומחר בנפרד\n';
        text += '· ניתן להגיש שינויים עד 30 ימים מקבלת הסרט המוכן\n';
        text += '· השינויים יבוצעו עד 14 ימי עסקים מיום קבלת טופס התיקונים מהלקוח\n';
        text += '\n_גיבויים:_\n';
        text += '· חומרי גלם יגובו 30 ימים מיום שליחת הסרט המוכן\n';
        text += '· אקספורטים של סרטים מוכנים יגובו 90 ימים מיום שליחת הסרט המוכן\n';
        text += '· ניתן לקבל שירות של ניהול גיבויים בתשלום של 30 ש"ח לטרה בחודש\n';
        text += '\n_המחירים לא כוללים מע"מ אלא אם צוין אחרת_';

        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(text).then(function() {
                showCopied();
            }).catch(function() {
                fallbackCopy(text);
            });
        } else {
            fallbackCopy(text);
        }
    });

    function fallbackCopy(text) {
        var textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        try {
            document.execCommand('copy');
            showCopied();
        } catch (e) {
            alert('לא ניתן להעתיק. אנא העתק ידנית.');
        }
        document.body.removeChild(textarea);
    }

    function showCopied() {
        btnCopy.classList.add('copied');
        btnCopyText.textContent = 'הועתק!';
        setTimeout(function() {
            btnCopy.classList.remove('copied');
            btnCopyText.textContent = 'העתק סיכום';
        }, 2000);
    }

    // ===== INIT =====
    render();
})();
</script>

</body>
</html>
